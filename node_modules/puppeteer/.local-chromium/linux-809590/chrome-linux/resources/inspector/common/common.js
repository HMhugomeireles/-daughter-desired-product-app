import{StringUtilities as e,ls as t,UIString as s}from"../platform/platform.js";export{UIString}from"../platform/platform.js";import{Runtime as r}from"../root/root.js";var i=Object.freeze({__proto__:null,App:class{presentUI(e){}}});var n=Object.freeze({__proto__:null,AppProvider:class{createApp(){throw new Error("not implemented")}}});var o=Object.freeze({__proto__:null,CharacterIdMap:class{constructor(){this._elementToCharacter=new Map,this._characterToElement=new Map,this._charCode=33}toChar(e){let t=this._elementToCharacter.get(e);if(!t){if(this._charCode>=65535)throw new Error("CharacterIdMap ran out of capacity!");t=String.fromCharCode(this._charCode++),this._elementToCharacter.set(e,t),this._characterToElement.set(t,e)}return t}fromChar(e){const t=this._characterToElement.get(e);return void 0===t?null:t}}});function a(e,t){const s=e[3];return[(1-s)*t[0]+s*e[0],(1-s)*t[1]+s*e[1],(1-s)*t[2]+s*e[2],s+t[3]*(1-s)]}function l([e,t,s,r]){const i=Math.max(e,t,s),n=Math.min(e,t,s),o=i-n,a=i+n;let l;l=n===i?0:e===i?(1/6*(t-s)/o+1)%1:t===i?1/6*(s-e)/o+1/3:1/6*(e-t)/o+2/3;const h=.5*a;let c;return c=0===h||1===h?0:h<=.5?o/a:o/(2-a),[l,c,h,r]}function h([e,t,s]){return.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}var c=Object.freeze({__proto__:null,blendColors:a,rgbaToHsla:l,luminance:h,contrastRatio:function(e,t){const s=h(a(e,t)),r=h(t);return(Math.max(s,r)+.05)/(Math.min(s,r)+.05)}});let u;class g{constructor(e,t,s){this._hsla=void 0,this._rgba=e,this._originalText=s||null,this._originalTextIsValid=!!this._originalText,this._format=t,void 0===this._rgba[3]&&(this._rgba[3]=1);for(let e=0;e<4;++e)this._rgba[e]<0&&(this._rgba[e]=0,this._originalTextIsValid=!1),this._rgba[e]>1&&(this._rgba[e]=1,this._originalTextIsValid=!1)}static parse(e){let t=e.toLowerCase().replace(/\s+/g,"").match(/^(?:#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})|(\w+))$/i);if(t){if(t[1]){let s,r=t[1].toLowerCase();3===r.length?(s=d.ShortHEX,r=r.charAt(0)+r.charAt(0)+r.charAt(1)+r.charAt(1)+r.charAt(2)+r.charAt(2)):4===r.length?(s=d.ShortHEXA,r=r.charAt(0)+r.charAt(0)+r.charAt(1)+r.charAt(1)+r.charAt(2)+r.charAt(2)+r.charAt(3)+r.charAt(3)):s=6===r.length?d.HEX:d.HEXA;const i=parseInt(r.substring(0,2),16),n=parseInt(r.substring(2,4),16),o=parseInt(r.substring(4,6),16);let a=1;return 8===r.length&&(a=parseInt(r.substring(6,8),16)/255),new g([i/255,n/255,o/255,a],s,e)}if(t[2]){const s=t[2].toLowerCase();if(s in p){const t=p[s],r=g.fromRGBA(t);return r._format=d.Nickname,r._originalText=e,r}return null}return null}if(t=e.toLowerCase().match(/^\s*(?:(rgba?)|(hsla?))\((.*)\)\s*$/),t){const s=t[3].trim();let r=s.split(/\s*,\s*/);if(1===r.length)if(r=s.split(/\s+/),"/"===r[3]){if(r.splice(3,1),4!==r.length)return null}else if(r.length>2&&-1!==r[2].indexOf("/")||r.length>3&&-1!==r[3].indexOf("/")){const e=r.slice(2,4).join("");r=r.slice(0,2).concat(e.split(/\//)).concat(r.slice(4))}else if(r.length>=4)return null;if(3!==r.length&&4!==r.length||r.indexOf("")>-1)return null;const i=void 0!==r[3];if(t[1]){const t=[g._parseRgbNumeric(r[0]),g._parseRgbNumeric(r[1]),g._parseRgbNumeric(r[2]),i?g._parseAlphaNumeric(r[3]):1];return t.indexOf(null)>-1?null:new g(t,i?d.RGBA:d.RGB,e)}if(t[2]){const t=[g._parseHueNumeric(r[0]),g._parseSatLightNumeric(r[1]),g._parseSatLightNumeric(r[2]),i?g._parseAlphaNumeric(r[3]):1];if(t.indexOf(null)>-1)return null;const s=[];return g.hsl2rgb(t,s),new g(s,i?d.HSLA:d.HSL,e)}}return null}static fromRGBA(e){return new g([e[0]/255,e[1]/255,e[2]/255,e[3]],d.RGBA)}static fromHSVA(e){const t=[];return g.hsva2rgba(e,t),new g(t,d.HSLA)}static _parsePercentOrNumber(e){if(isNaN(e.replace("%","")))return null;const t=parseFloat(e);return-1!==e.indexOf("%")?e.indexOf("%")!==e.length-1?null:t/100:t}static _parseRgbNumeric(e){const t=g._parsePercentOrNumber(e);return null===t?null:-1!==e.indexOf("%")?t:t/255}static _parseHueNumeric(e){const t=e.replace(/(deg|g?rad|turn)$/,"");if(isNaN(t)||e.match(/\s+(deg|g?rad|turn)/))return null;const s=parseFloat(t);return-1!==e.indexOf("turn")?s%1:-1!==e.indexOf("grad")?s/400%1:-1!==e.indexOf("rad")?s/(2*Math.PI)%1:s/360%1}static _parseSatLightNumeric(e){if(e.indexOf("%")!==e.length-1||isNaN(e.replace("%","")))return null;const t=parseFloat(e);return Math.min(1,t/100)}static _parseAlphaNumeric(e){return g._parsePercentOrNumber(e)}static _hsva2hsla(e,t){const s=e[0];let r=e[1];const i=e[2],n=(2-r)*i;0===i||0===r?r=0:r*=i/(n<1?n:2-n),t[0]=s,t[1]=r,t[2]=n/2,t[3]=e[3]}static hsl2rgb(e,t){const s=e[0];let r=e[1];const i=e[2];function n(e,t,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?e+(t-e)*s*6:2*s<1?t:3*s<2?e+(t-e)*(2/3-s)*6:e}let o;r<0&&(r=0),o=i<=.5?i*(1+r):i+r-i*r;const a=2*i-o,l=s+1/3,h=s,c=s-1/3;t[0]=n(a,o,l),t[1]=n(a,o,h),t[2]=n(a,o,c),t[3]=e[3]}static hsva2rgba(e,t){g._hsva2hsla(e,f),g.hsl2rgb(f,t);for(let e=0;e<f.length;e++)f[e]=0}static desiredLuminance(e,t,s){function r(){return s?(e+.05)*t-.05:(e+.05)/t-.05}let i=r();return(i<0||i>1)&&(s=!s,i=r()),i}static approachColorValue(e,t,s,r){const i=()=>h(a(g.fromHSVA(e).rgba(),t));let n=e[s],o=1,l=i()-r,c=Math.sign(l);for(let t=100;t;t--){if(Math.abs(l)<2e-4)return e[s]=n,n;const t=Math.sign(l);if(t!==c)o/=2,c=t;else if(n<0||n>1)return null;n+=o*(2===s?-l:l),e[s]=n,l=i()-r}return console.error("Loop exited unexpectedly"),null}static findFgColorForContrast(e,t,s){const r=e.hsva(),i=t.rgba(),n=h(t.rgba()),o=h(a(g.fromHSVA(r).rgba(),i))>n,l=g.desiredLuminance(n,s,o);return g.approachColorValue(r,i,2,l)?g.fromHSVA(r):(r[2]=1,g.approachColorValue(r,i,1,l)?g.fromHSVA(r):null)}format(){return this._format}hsla(){return this._hsla||(this._hsla=l(this._rgba)),this._hsla}canonicalHSLA(){const e=this.hsla();return[Math.round(360*e[0]),Math.round(100*e[1]),Math.round(100*e[2]),e[3]]}hsva(){const e=this.hsla(),t=e[0];let s=e[1];const r=e[2];return s*=r<.5?r:1-r,[t,0!==s?2*s/(r+s):0,r+s,e[3]]}hasAlpha(){return 1!==this._rgba[3]}detectHEXFormat(){let e=!0;for(let t=0;t<4;++t){if(Math.round(255*this._rgba[t])%17){e=!1;break}}const t=this.hasAlpha(),s=d;return e?t?s.ShortHEXA:s.ShortHEX:t?s.HEXA:s.HEX}asString(t){if(t===this._format&&this._originalTextIsValid)return this._originalText;function s(e){return Math.round(255*e)}function r(e){const t=Math.round(255*e).toString(16);return 1===t.length?"0"+t:t}function i(e){return(Math.round(255*e)/17).toString(16)}switch(t||(t=this._format),t){case d.Original:return this._originalText;case d.RGB:case d.RGBA:{const t=e.sprintf("rgb(%d %d %d",s(this._rgba[0]),s(this._rgba[1]),s(this._rgba[2]));return this.hasAlpha()?t+e.sprintf(" / %d%)",Math.round(100*this._rgba[3])):t+")"}case d.HSL:case d.HSLA:{const t=this.hsla(),s=e.sprintf("hsl(%ddeg %d% %d%",Math.round(360*t[0]),Math.round(100*t[1]),Math.round(100*t[2]));return this.hasAlpha()?s+e.sprintf(" / %d%)",Math.round(100*t[3])):s+")"}case d.HEXA:return e.sprintf("#%s%s%s%s",r(this._rgba[0]),r(this._rgba[1]),r(this._rgba[2]),r(this._rgba[3])).toLowerCase();case d.HEX:return this.hasAlpha()?null:e.sprintf("#%s%s%s",r(this._rgba[0]),r(this._rgba[1]),r(this._rgba[2])).toLowerCase();case d.ShortHEXA:{const t=this.detectHEXFormat();return t!==d.ShortHEXA&&t!==d.ShortHEX?null:e.sprintf("#%s%s%s%s",i(this._rgba[0]),i(this._rgba[1]),i(this._rgba[2]),i(this._rgba[3])).toLowerCase()}case d.ShortHEX:return this.hasAlpha()||this.detectHEXFormat()!==d.ShortHEX?null:e.sprintf("#%s%s%s",i(this._rgba[0]),i(this._rgba[1]),i(this._rgba[2])).toLowerCase();case d.Nickname:return this.nickname()}return this._originalText}rgba(){return this._rgba.slice()}canonicalRGBA(){const e=new Array(4);for(let t=0;t<3;++t)e[t]=Math.round(255*this._rgba[t]);return e[3]=this._rgba[3],e}nickname(){if(!u){u=new Map;for(const e in p){let t=p[e];4!==t.length&&(t=t.concat(1)),u.set(String(t),e)}}return u.get(String(this.canonicalRGBA()))||null}toProtocolRGBA(){const e=this.canonicalRGBA(),t={r:e[0],g:e[1],b:e[2],a:void 0};return 1!==e[3]&&(t.a=e[3]),t}invert(){const e=[];return e[0]=1-this._rgba[0],e[1]=1-this._rgba[1],e[2]=1-this._rgba[2],e[3]=this._rgba[3],new g(e,d.RGBA)}setAlpha(e){const t=this._rgba.slice();return t[3]=e,new g(t,d.RGBA)}blendWith(e){const t=a(e._rgba,this._rgba);return new g(t,d.RGBA)}setFormat(e){this._format=e}}const d={Original:"original",Nickname:"nickname",HEX:"hex",ShortHEX:"shorthex",HEXA:"hexa",ShortHEXA:"shorthexa",RGB:"rgb",RGBA:"rgba",HSL:"hsl",HSLA:"hsla"},p={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[237,20,61],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgreen:[144,238,144],lightgray:[211,211,211],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},m={Content:g.fromRGBA([111,168,220,.66]),ContentLight:g.fromRGBA([111,168,220,.5]),ContentOutline:g.fromRGBA([9,83,148]),Padding:g.fromRGBA([147,196,125,.55]),PaddingLight:g.fromRGBA([147,196,125,.4]),Border:g.fromRGBA([255,229,153,.66]),BorderLight:g.fromRGBA([255,229,153,.5]),Margin:g.fromRGBA([246,178,107,.66]),MarginLight:g.fromRGBA([246,178,107,.5]),EventTarget:g.fromRGBA([255,196,196,.66]),Shape:g.fromRGBA([96,82,177,.8]),ShapeMargin:g.fromRGBA([96,82,127,.6]),CssGrid:g.fromRGBA([75,0,130,1]),GridRowLine:g.fromRGBA([127,32,210,1]),GridColumnLine:g.fromRGBA([127,32,210,1]),GridBorder:g.fromRGBA([127,32,210,1]),GridRowGapBackground:g.fromRGBA([127,32,210,.3]),GridColumnGapBackground:g.fromRGBA([127,32,210,.3]),GridRowGapHatch:g.fromRGBA([127,32,210,.8]),GridColumnGapHatch:g.fromRGBA([127,32,210,.8]),GridAreaBorder:g.fromRGBA([26,115,232,1])},_={ParentOutline:g.fromRGBA([224,90,183,1]),ChildOutline:g.fromRGBA([0,120,212,1])};const f=[0,0,0,0];var S=Object.freeze({__proto__:null,Color:g,Regex:/((?:rgb|hsl)a?\([^)]+\)|#[0-9a-fA-F]{8}|#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3,4}|\b[a-zA-Z]+\b(?!-))/g,Format:d,Nicknames:p,PageHighlight:m,SourceOrderHighlight:_,Generator:class{constructor(e,t,s,r){this._hueSpace=e||{min:0,max:360,count:void 0},this._satSpace=t||67,this._lightnessSpace=s||80,this._alphaSpace=r||1,this._colors=new Map}setColorForID(e,t){this._colors.set(e,t)}colorForID(e){let t=this._colors.get(e);return t||(t=this._generateColorForID(e),this._colors.set(e,t)),t}_generateColorForID(e){const t=String.hashCode(e),s=this._indexToValueInSpace(t,this._hueSpace),r=this._indexToValueInSpace(t>>8,this._satSpace),i=this._indexToValueInSpace(t>>16,this._lightnessSpace),n=this._indexToValueInSpace(t>>24,this._alphaSpace),o=`hsl(${s}deg ${r}% ${i}%`;return 1!==n?`${o} / ${Math.floor(100*n)}%)`:o+")"}_indexToValueInSpace(e,t){if("number"==typeof t)return t;const s=t.count||t.max-t.min;return e%=s,t.min+Math.floor(e/(s-1)*(t.max-t.min))}}});class b{constructor(){this._listeners}addEventListener(e,t,s){t||console.assert(!1),this._listeners||(this._listeners=new Map),this._listeners.has(e)||this._listeners.set(e,[]);const r=this._listeners.get(e);return r&&r.push({thisObject:s,listener:t,disposed:void 0}),{eventTarget:this,eventType:e,thisObject:s,listener:t}}once(e){return new Promise(t=>{const s=this.addEventListener(e,r=>{this.removeEventListener(e,s.listener),t(r.data)})})}removeEventListener(e,t,s){if(console.assert(!!t),!this._listeners||!this._listeners.has(e))return;const r=this._listeners.get(e)||[];for(let e=0;e<r.length;++e)r[e].listener===t&&r[e].thisObject===s&&(r[e].disposed=!0,r.splice(e--,1));r.length||this._listeners.delete(e)}hasEventListeners(e){return!(!this._listeners||!this._listeners.has(e))}dispatchEventToListeners(e,t){if(!this._listeners||!this._listeners.has(e))return;const s={data:t},r=this._listeners.get(e).slice(0)||[];for(let e=0;e<r.length;++e)r[e].disposed||r[e].listener.call(r[e].thisObject,s)}}var w=Object.freeze({__proto__:null,ObjectWrapper:b});class v{reveal(e,t){throw new Error("not implemented")}}let y=function(e,t){return e?self.runtime.allInstances(v,e).then((function(s){const r=[];for(let i=0;i<s.length;++i)r.push(s[i].reveal(e,t));return Promise.race(r)})):Promise.reject(new Error("Can't reveal "+e))};var x=Object.freeze({__proto__:null,Revealer:v,get reveal(){return y},setRevealForTest:function(e){y=e},revealDestination:function(e){const t=self.runtime.extension(v,e);return t?t.descriptor().destination:null}});let T;class k extends b{constructor(){super(),this._messages=[]}static instance({forceNew:e}={forceNew:!1}){return T&&!e||(T=new k),T}addMessage(e,t,s){const r=new P(e,t||R.Info,Date.now(),s||!1);this._messages.push(r),this.dispatchEventToListeners(A.MessageAdded,r)}log(e){this.addMessage(e,R.Info)}warn(e){this.addMessage(e,R.Warning)}error(e){this.addMessage(e,R.Error,!0)}messages(){return this._messages}show(){this.showPromise()}showPromise(){return y(this)}}const A={MessageAdded:Symbol("messageAdded")},R={Info:"info",Warning:"warning",Error:"error"};class P{constructor(e,t,s,r){this.text=e,this.level=t,this.timestamp="number"==typeof s?s:Date.now(),this.show=r}}var V=Object.freeze({__proto__:null,Console:k,Events:A,MessageLevel:R,Message:P});var O=Object.freeze({__proto__:null,debounce:function(e,t){let s=0;return()=>{clearTimeout(s),s=setTimeout(()=>e(),t)}}});function C(e){for(const t of e)t.eventTarget.removeEventListener(t.eventType,t.listener,t.thisObject);e.splice(0)}class L{addEventListener(e,t,s){throw new Error("not implemented")}once(e){throw new Error("not implemented")}removeEventListener(e,t,s){throw new Error("not implemented")}hasEventListeners(e){throw new Error("not implemented")}dispatchEventToListeners(e,t){}}L.removeEventListeners=C;var E=Object.freeze({__proto__:null,EventDescriptor:void 0,removeEventListeners:C,EventTarget:L,fireEvent:function(e,t={},s=window){const r=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});s.dispatchEvent(r)},EventTargetEvent:void 0});var F=Object.freeze({__proto__:null,JavaScriptMetaData:class{signaturesForNativeFunction(e){throw new Error("not implemented")}signaturesForInstanceMethod(e,t){throw new Error("not implemented")}signaturesForStaticMethod(e,t){throw new Error("not implemented")}}});const M=Symbol("uninitialized"),j=Symbol("error");var I=Object.freeze({__proto__:null,lazy:function(e){let t=M,s=null;return()=>{if(t===j)throw s;if(t!==M)return t;try{return t=e(),t}catch(e){throw s=e,t=j,s}}}});class W{linkify(e,t){throw new Error("linkify not implemented")}static linkify(e,t){return e?self.runtime.extension(W,e).instance().then(s=>s.linkify(e,t)):Promise.reject(new Error("Can't linkify "+e))}}var N=Object.freeze({__proto__:null,Linkifier:W,Options:void 0});class B{constructor(e){this.isValid=!1,this.url=e,this.scheme="",this.user="",this.host="",this.port="",this.path="",this.queryParams="",this.fragment="",this.folderPathComponents="",this.lastPathComponent="";const t=this.url.startsWith("blob:"),s=(t?e.substring(5):e).match(B._urlRegex());if(s)this.isValid=!0,t?(this._blobInnerScheme=s[2].toLowerCase(),this.scheme="blob"):this.scheme=s[2].toLowerCase(),this.user=s[3],this.host=s[4],this.port=s[5],this.path=s[6]||"/",this.queryParams=s[7]||"",this.fragment=s[8];else{if(this.url.startsWith("data:"))return void(this.scheme="data");if(this.url.startsWith("blob:"))return void(this.scheme="blob");if("about:blank"===this.url)return void(this.scheme="about");this.path=this.url}const r=this.path.lastIndexOf("/");-1!==r?(this.folderPathComponents=this.path.substring(0,r),this.lastPathComponent=this.path.substring(r+1)):this.lastPathComponent=this.path}static fromString(e){const t=new B(e.toString());return t.isValid?t:null}static platformPathToURL(e){return(e=e.replace(/\\/g,"/")).startsWith("file://")||(e=e.startsWith("/")?"file://"+e:"file:///"+e),e}static urlToPlatformPath(e,t){return console.assert(e.startsWith("file://"),"This must be a file URL."),t?e.substr("file:///".length).replace(/\//g,"\\"):e.substr("file://".length)}static urlWithoutHash(e){const t=e.indexOf("#");return-1!==t?e.substr(0,t):e}static _urlRegex(){if(B._urlRegexInstance)return B._urlRegexInstance;return B._urlRegexInstance=new RegExp("^("+/([A-Za-z][A-Za-z0-9+.-]*):\/\//.source+/(?:([A-Za-z0-9\-._~%!$&'()*+,;=:]*)@)?/.source+/((?:\[::\d?\])|(?:[^\s\/:]*))/.source+/(?::([\d]+))?/.source+")"+/(\/[^#?]*)?/.source+/(?:\?([^#]*))?/.source+/(?:#(.*))?/.source+"$"),B._urlRegexInstance}static extractPath(e){const t=this.fromString(e);return t?t.path:""}static extractOrigin(e){const t=this.fromString(e);return t?t.securityOrigin():""}static extractExtension(e){const t=(e=B.urlWithoutHash(e)).indexOf("?");-1!==t&&(e=e.substr(0,t));const s=e.lastIndexOf("/");-1!==s&&(e=e.substr(s+1));const r=e.lastIndexOf(".");if(-1!==r){const t=(e=e.substr(r+1)).indexOf("%");return-1!==t?e.substr(0,t):e}return""}static extractName(e){let t=e.lastIndexOf("/");const s=-1!==t?e.substr(t+1):e;return t=s.indexOf("?"),t<0?s:s.substr(0,t)}static completeURL(e,t){const s=t.trim();if(s.startsWith("data:")||s.startsWith("blob:")||s.startsWith("javascript:")||s.startsWith("mailto:"))return t;const r=this.fromString(s);if(r&&r.scheme)return s;const i=this.fromString(e);if(!i)return null;if(i.isDataURL())return t;if(t.length>1&&"/"===t.charAt(0)&&"/"===t.charAt(1))return i.scheme+":"+t;const n=i.securityOrigin(),o=i.path,a=i.queryParams?"?"+i.queryParams:"";if(!t.length)return n+o+a;if("#"===t.charAt(0))return n+o+a+t;if("?"===t.charAt(0))return n+o+t;const l=t.match(/^[^#?]*/);if(!l||!t.length)throw new Error("Invalid href");let h=l[0];const c=t.substring(h.length);return"/"!==h.charAt(0)&&(h=i.folderPathComponents+"/"+h),n+Root.Runtime.normalizePath(h)+c}static splitLineAndColumn(e){const t=e.match(B._urlRegex());let s="",r=e;t&&(s=t[1],r=e.substring(t[1].length));const i=/(?::(\d+))?(?::(\d+))?$/.exec(r);let n,o;return console.assert(!!i),i?("string"==typeof i[1]&&(n=parseInt(i[1],10),n=isNaN(n)?void 0:n-1),"string"==typeof i[2]&&(o=parseInt(i[2],10),o=isNaN(o)?void 0:o-1),{url:s+r.substring(0,r.length-i[0].length),lineNumber:n,columnNumber:o}):{url:e,lineNumber:0,columnNumber:0}}static removeWasmFunctionInfoFromURL(e){const t=e.search(/:wasm-function\[\d+\]/);return-1===t?e:e.substring(0,t)}static isRelativeURL(e){return!/^[A-Za-z][A-Za-z0-9+.-]*:/.test(e)}get displayName(){return this._displayName?this._displayName:this.isDataURL()?this.dataURLDisplayName():this.isBlobURL()||this.isAboutBlank()?this.url:(this._displayName=this.lastPathComponent,this._displayName||(this._displayName=(this.host||"")+"/"),"/"===this._displayName&&(this._displayName=this.url),this._displayName)}dataURLDisplayName(){return this._dataURLDisplayName?this._dataURLDisplayName:this.isDataURL()?(this._dataURLDisplayName=this.url.trimEndWithMaxLength(20),this._dataURLDisplayName):""}isAboutBlank(){return"about:blank"===this.url}isDataURL(){return"data"===this.scheme}isBlobURL(){return this.url.startsWith("blob:")}lastPathComponentWithFragment(){return this.lastPathComponent+(this.fragment?"#"+this.fragment:"")}domain(){return this.isDataURL()?"data:":this.host+(this.port?":"+this.port:"")}securityOrigin(){if(this.isDataURL())return"data:";return(this.isBlobURL()?this._blobInnerScheme:this.scheme)+"://"+this.domain()}urlWithoutScheme(){return this.scheme&&this.url.startsWith(this.scheme+"://")?this.url.substring(this.scheme.length+3):this.url}}B._urlRegexInstance=null;var H=Object.freeze({__proto__:null,ParsedURL:B});class z{constructor(e,t){this._composite=e,this._weight=t||1,this._worked=0,this._totalWork=0}isCanceled(){return this._composite._parent.isCanceled()}setTitle(e){this._composite._parent.setTitle(e)}done(){this.setWorked(this._totalWork),this._composite._childDone()}setTotalWork(e){this._totalWork=e,this._composite._update()}setWorked(e,t){this._worked=e,void 0!==t&&this.setTitle(t),this._composite._update()}worked(e){this.setWorked(this._worked+(e||1))}}var G=Object.freeze({__proto__:null,Progress:class{setTotalWork(e){}setTitle(e){}setWorked(e,t){}worked(e){}done(){}isCanceled(){return!1}},CompositeProgress:class{constructor(e){this._parent=e,this._children=[],this._childrenDone=0,this._parent.setTotalWork(1),this._parent.setWorked(0)}_childDone(){++this._childrenDone===this._children.length&&this._parent.done()}createSubProgress(e){const t=new z(this,e);return this._children.push(t),t}_update(){let e=0,t=0;for(let s=0;s<this._children.length;++s){const r=this._children[s];r._totalWork&&(t+=r._weight*r._worked/r._totalWork),e+=r._weight}this._parent.setWorked(t/e)}},SubProgress:z,ProgressProxy:class{constructor(e,t){this._delegate=e,this._doneCallback=t}isCanceled(){return!!this._delegate&&this._delegate.isCanceled()}setTitle(e){this._delegate&&this._delegate.setTitle(e)}done(){this._delegate&&this._delegate.done(),this._doneCallback&&this._doneCallback()}setTotalWork(e){this._delegate&&this._delegate.setTotalWork(e)}setWorked(e,t){this._delegate&&this._delegate.setWorked(e,t)}worked(e){this._delegate&&this._delegate.worked(e)}}});var D=Object.freeze({__proto__:null,QueryParamHandler:class{handleQueryParam(e){}}});class U{constructor(e,t,s,r){this._name=e,this._title=t,this._category=s,this._isTextType=r}static fromMimeType(e){return e?e.startsWith("text/html")?$.Document:e.startsWith("text/css")?$.Stylesheet:e.startsWith("image/")?$.Image:e.startsWith("text/")?$.Script:e.includes("font")?$.Font:e.includes("script")?$.Script:e.includes("octet")?$.Other:e.includes("application")?$.Script:$.Other:$.Other}static fromURL(e){return J.get(B.extractExtension(e))||null}static fromName(e){for(const t in $){const s=$[t];if(s.name()===e)return s}return null}static mimeFromURL(e){const t=B.extractName(e);if(Z.has(t))return Z.get(t);const s=B.extractExtension(e).toLowerCase();return Q.get(s)}static mimeFromExtension(e){return Q.get(e)}name(){return this._name}title(){return this._title}category(){return this._category}isTextType(){return this._isTextType}isScript(){return"script"===this._name||"sm-script"===this._name}hasScripts(){return this.isScript()||this.isDocument()}isStyleSheet(){return"stylesheet"===this._name||"sm-stylesheet"===this._name}isDocument(){return"document"===this._name}isDocumentOrScriptOrStyleSheet(){return this.isDocument()||this.isScript()||this.isStyleSheet()}isFromSourceMap(){return this._name.startsWith("sm-")}toString(){return this._name}canonicalMimeType(){return this.isDocument()?"text/html":this.isScript()?"text/javascript":this.isStyleSheet()?"text/css":""}}class X{constructor(e,t){this.title=e,this.shortTitle=t}}const q={XHR:new X(t`XHR and Fetch`,t`XHR`),Script:new X(t`Scripts`,t`JS`),Stylesheet:new X(t`Stylesheets`,t`CSS`),Image:new X(t`Images`,t`Img`),Media:new X(t`Media`,t`Media`),Font:new X(t`Fonts`,t`Font`),Document:new X(t`Documents`,t`Doc`),WebSocket:new X(t`WebSockets`,t`WS`),Manifest:new X(t`Manifest`,t`Manifest`),Other:new X(t`Other`,t`Other`)},$={Document:new U("document",t`Document`,q.Document,!0),Stylesheet:new U("stylesheet",t`Stylesheet`,q.Stylesheet,!0),Image:new U("image",t`Image`,q.Image,!1),Media:new U("media",t`Media`,q.Media,!1),Font:new U("font",t`Font`,q.Font,!1),Script:new U("script",t`Script`,q.Script,!0),TextTrack:new U("texttrack",t`TextTrack`,q.Other,!0),XHR:new U("xhr",t`XHR`,q.XHR,!0),Fetch:new U("fetch",t`Fetch`,q.XHR,!0),EventSource:new U("eventsource",t`EventSource`,q.XHR,!0),WebSocket:new U("websocket",t`WebSocket`,q.WebSocket,!1),Manifest:new U("manifest",t`Manifest`,q.Manifest,!0),SignedExchange:new U("signed-exchange",t`SignedExchange`,q.Other,!1),Ping:new U("ping",t`Ping`,q.Other,!1),CSPViolationReport:new U("csp-violation-report",t`CSPViolationReport`,q.Other,!1),Other:new U("other",t`Other`,q.Other,!1),SourceMapScript:new U("sm-script",t`Script`,q.Script,!0),SourceMapStyleSheet:new U("sm-stylesheet",t`Stylesheet`,q.Stylesheet,!0)},Z=new Map([["Cakefile","text/x-coffeescript"]]),J=new Map([["js",$.Script],["mjs",$.Script],["css",$.Stylesheet],["xsl",$.Stylesheet],["jpeg",$.Image],["jpg",$.Image],["svg",$.Image],["gif",$.Image],["png",$.Image],["ico",$.Image],["tiff",$.Image],["tif",$.Image],["bmp",$.Image],["webp",$.Media],["ttf",$.Font],["otf",$.Font],["ttc",$.Font],["woff",$.Font]]),Q=new Map([["js","text/javascript"],["mjs","text/javascript"],["css","text/css"],["html","text/html"],["htm","text/html"],["xml","application/xml"],["xsl","application/xml"],["asp","application/x-aspx"],["aspx","application/x-aspx"],["jsp","application/x-jsp"],["c","text/x-c++src"],["cc","text/x-c++src"],["cpp","text/x-c++src"],["h","text/x-c++src"],["m","text/x-c++src"],["mm","text/x-c++src"],["coffee","text/x-coffeescript"],["dart","text/javascript"],["ts","text/typescript"],["tsx","text/typescript-jsx"],["json","application/json"],["gyp","application/json"],["gypi","application/json"],["cs","text/x-csharp"],["java","text/x-java"],["less","text/x-less"],["php","text/x-php"],["phtml","application/x-httpd-php"],["py","text/x-python"],["sh","text/x-sh"],["scss","text/x-scss"],["vtt","text/vtt"],["ls","text/x-livescript"],["md","text/markdown"],["cljs","text/x-clojure"],["cljc","text/x-clojure"],["cljx","text/x-clojure"],["styl","text/x-styl"],["jsx","text/jsx"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["svg","image/svg+xml"],["gif","image/gif"],["webp","image/webp"],["png","image/png"],["ico","image/ico"],["tiff","image/tiff"],["tif","image/tif"],["bmp","image/bmp"],["ttf","font/opentype"],["otf","font/opentype"],["ttc","font/opentype"],["woff","application/font-woff"]]);var K=Object.freeze({__proto__:null,ResourceType:U,ResourceCategory:X,resourceCategories:q,resourceTypes:$,_mimeTypeByName:Z,_resourceTypeByExtension:J,_mimeTypeByExtension:Q});var Y=Object.freeze({__proto__:null,Runnable:class{run(){throw new Error("not implemented")}}});class ee{constructor(e,t,s){if(e>t)throw new Error("Invalid segment");this.begin=e,this.end=t,this.data=s}intersects(e){return this.begin<e.end&&e.begin<this.end}}var te=Object.freeze({__proto__:null,Segment:ee,SegmentedRange:class{constructor(e){this._segments=[],this._mergeCallback=e}append(e){let t=this._segments.lowerBound(e,(e,t)=>e.begin-t.begin),s=t,r=null;if(t>0){const s=this._segments[t-1];r=this._tryMerge(s,e),r?(--t,e=r):this._segments[t-1].end>=e.begin&&(e.end<s.end&&this._segments.splice(t,0,new ee(e.end,s.end,s.data)),s.end=e.begin)}for(;s<this._segments.length&&this._segments[s].end<=e.end;)++s;s<this._segments.length&&(r=this._tryMerge(e,this._segments[s]),r?(s++,e=r):e.intersects(this._segments[s])&&(this._segments[s].begin=e.end)),this._segments.splice(t,s-t,e)}appendRange(e){e.segments().forEach(e=>this.append(e))}segments(){return this._segments}_tryMerge(e,t){const s=this._mergeCallback&&this._mergeCallback(e,t);return s?(s.begin=e.begin,s.end=Math.max(e.end,t.end),s):null}}});let se;class re{constructor(e,t){this._globalStorage=e,this._localStorage=t,this._sessionStorage=new ie({}),this._eventSupport=new b,this._registry=new Map,this._moduleSettings=new Map,self.runtime.extensions("setting").forEach(this._registerModuleSetting.bind(this))}static hasInstance(){return void 0!==se}static instance(e={forceNew:null,globalStorage:null,localStorage:null}){const{forceNew:t,globalStorage:s,localStorage:r}=e;if(!se||t){if(!s||!r)throw new Error("Unable to create settings: global and local storage must be provided: "+(new Error).stack);se=new re(s,r)}return se}_registerModuleSetting(e){const t=e.descriptor(),s=t.settingName,i="regex"===t.settingType,n=t.defaultValue;let o;switch(t.storageType){case"local":o=le.Local;break;case"session":o=le.Session;break;case"global":o=le.Global;break;default:o=le.Global}const a=i?this.createRegExpSetting(s,n,void 0,o):this.createSetting(s,n,o);e.title()&&a.setTitle(e.title()),t.userActionCondition&&a.setRequiresUserAction(!!r.Runtime.queryParam(t.userActionCondition)),a._extension=e,this._moduleSettings.set(s,a)}moduleSetting(e){const t=this._moduleSettings.get(e);if(!t)throw new Error("No setting registered: "+e);return t}settingForTest(e){const t=this._registry.get(e);if(!t)throw new Error("No setting registered: "+e);return t}createSetting(e,t,s){const r=this._storageFromType(s);return this._registry.get(e)||this._registry.set(e,new ne(this,e,t,this._eventSupport,r)),this._registry.get(e)}createLocalSetting(e,t){return this.createSetting(e,t,le.Local)}createRegExpSetting(e,t,s,r){return this._registry.get(e)||this._registry.set(e,new oe(this,e,t,this._eventSupport,this._storageFromType(r),s)),this._registry.get(e)}clearAll(){this._globalStorage.removeAll(),this._localStorage.removeAll();re.instance().createSetting(ae._currentVersionName,0).set(ae.currentVersion)}_storageFromType(e){switch(e){case le.Local:return this._localStorage;case le.Session:return this._sessionStorage;case le.Global:return this._globalStorage}return this._globalStorage}}class ie{constructor(e,t,s,r,i){this._object=e,this._setCallback=t||function(){},this._removeCallback=s||function(){},this._removeAllCallback=r||function(){},this._storagePrefix=i||""}set(e,t){e=this._storagePrefix+e,this._object[e]=t,this._setCallback(e,t)}has(e){return(e=this._storagePrefix+e)in this._object}get(e){return e=this._storagePrefix+e,this._object[e]}remove(e){e=this._storagePrefix+e,delete this._object[e],this._removeCallback(e)}removeAll(){this._object={},this._removeAllCallback()}_dumpSizes(){k.instance().log("Ten largest settings: ");const e={__proto__:null};for(const t in this._object)e[t]=this._object[t].length;const t=Object.keys(e);t.sort((function(t,s){return e[s]-e[t]}));for(let s=0;s<10&&s<t.length;++s)k.instance().log("Setting: '"+t[s]+"', size: "+e[t[s]])}}class ne{constructor(e,t,s,r,i){this._settings=e,this._name=t,this._defaultValue=s,this._eventSupport=r,this._storage=i,this._title="",this._extension=null}addChangeListener(e,t){return this._eventSupport.addEventListener(this._name,e,t)}removeChangeListener(e,t){this._eventSupport.removeEventListener(this._name,e,t)}get name(){return this._name}title(){return this._title}setTitle(e){this._title=e}setRequiresUserAction(e){this._requiresUserAction=e}get(){if(this._requiresUserAction&&!this._hadUserAction)return this._defaultValue;if(void 0!==this._value)return this._value;if(this._value=this._defaultValue,this._storage.has(this._name))try{this._value=JSON.parse(this._storage.get(this._name))}catch(e){this._storage.remove(this._name)}return this._value}set(e){this._hadUserAction=!0,this._value=e;try{const t=JSON.stringify(e);try{this._storage.set(this._name,t)}catch(e){this._printSettingsSavingError(e.message,this._name,t)}}catch(e){k.instance().error("Cannot stringify setting with name: "+this._name+", error: "+e.message)}this._eventSupport.dispatchEventToListeners(this._name,e)}remove(){this._settings._registry.delete(this._name),this._settings._moduleSettings.delete(this._name),this._storage.remove(this._name)}extension(){return this._extension}_printSettingsSavingError(e,t,s){const r="Error saving setting with name: "+this._name+", value length: "+s.length+". Error: "+e;console.error(r),k.instance().error(r),this._storage._dumpSizes()}}class oe extends ne{constructor(e,t,s,r,i,n){super(e,t,s?[{pattern:s}]:[],r,i),this._regexFlags=n}get(){const e=[],t=this.getAsArray();for(let s=0;s<t.length;++s){const r=t[s];r.pattern&&!r.disabled&&e.push(r.pattern)}return e.join("|")}getAsArray(){return super.get()}set(e){this.setAsArray([{pattern:e,disabled:!1}])}setAsArray(e){delete this._regex,super.set(e)}asRegExp(){if(void 0!==this._regex)return this._regex;this._regex=null;try{const e=this.get();e&&(this._regex=new RegExp(e,this._regexFlags||""))}catch(e){}return this._regex}}class ae{static get _currentVersionName(){return"inspectorVersion"}static get currentVersion(){return 30}updateVersion(){const e=window.localStorage?window.localStorage[ae._currentVersionName]:0,t=re.instance().createSetting(ae._currentVersionName,0),s=ae.currentVersion,r=t.get()||parseInt(e||"0",10);if(0===r)return void t.set(s);const i=this._methodsToRunToUpdateVersion(r,s);for(const e of i)this[e].call(this);t.set(s)}_methodsToRunToUpdateVersion(e,t){const s=[];for(let r=e;r<t;++r)s.push("_updateVersionFrom"+r+"To"+(r+1));return s}_updateVersionFrom0To1(){this._clearBreakpointsWhenTooMany(re.instance().createLocalSetting("breakpoints",[]),5e5)}_updateVersionFrom1To2(){re.instance().createSetting("previouslyViewedFiles",[]).set([])}_updateVersionFrom2To3(){re.instance().createSetting("fileSystemMapping",{}).set({}),re.instance().createSetting("fileMappingEntries",[]).remove()}_updateVersionFrom3To4(){const e=re.instance().createSetting("showHeaSnapshotObjectsHiddenProperties",!1);he("showAdvancedHeapSnapshotProperties").set(e.get()),e.remove()}_updateVersionFrom4To5(){const e={FileSystemViewSidebarWidth:"fileSystemViewSplitViewState",elementsSidebarWidth:"elementsPanelSplitViewState",StylesPaneSplitRatio:"stylesPaneSplitViewState",heapSnapshotRetainersViewSize:"heapSnapshotSplitViewState","InspectorView.splitView":"InspectorView.splitViewState","InspectorView.screencastSplitView":"InspectorView.screencastSplitViewState","Inspector.drawerSplitView":"Inspector.drawerSplitViewState",layerDetailsSplitView:"layerDetailsSplitViewState",networkSidebarWidth:"networkPanelSplitViewState",sourcesSidebarWidth:"sourcesPanelSplitViewState",scriptsPanelNavigatorSidebarWidth:"sourcesPanelNavigatorSplitViewState",sourcesPanelSplitSidebarRatio:"sourcesPanelDebuggerSidebarSplitViewState","timeline-details":"timelinePanelDetailsSplitViewState","timeline-split":"timelinePanelRecorsSplitViewState","timeline-view":"timelinePanelTimelineStackSplitViewState",auditsSidebarWidth:"auditsPanelSplitViewState",layersSidebarWidth:"layersPanelSplitViewState",profilesSidebarWidth:"profilesPanelSplitViewState",resourcesSidebarWidth:"resourcesPanelSplitViewState"},t={};for(const s in e){const r=e[s],i=s+"H";let n=null;const o=re.instance().createSetting(s,t);o.get()!==t&&(n=n||{},n.vertical={},n.vertical.size=o.get(),o.remove());const a=re.instance().createSetting(i,t);a.get()!==t&&(n=n||{},n.horizontal={},n.horizontal.size=a.get(),a.remove()),n&&re.instance().createSetting(r,{}).set(n)}}_updateVersionFrom5To6(){const e={debuggerSidebarHidden:"sourcesPanelSplitViewState",navigatorHidden:"sourcesPanelNavigatorSplitViewState","WebInspector.Drawer.showOnLoad":"Inspector.drawerSplitViewState"};for(const t in e){const s=re.instance().createSetting(t,null);if(null===s.get()){s.remove();continue}const r=e[t],i="WebInspector.Drawer.showOnLoad"===t,n=s.get()!==i;s.remove();const o=n?"OnlyMain":"Both",a=re.instance().createSetting(r,{}),l=a.get()||{};l.vertical=l.vertical||{},l.vertical.showMode=o,l.horizontal=l.horizontal||{},l.horizontal.showMode=o,a.set(l)}}_updateVersionFrom6To7(){const e={sourcesPanelNavigatorSplitViewState:"sourcesPanelNavigatorSplitViewState",elementsPanelSplitViewState:"elementsPanelSplitViewState",stylesPaneSplitViewState:"stylesPaneSplitViewState",sourcesPanelDebuggerSidebarSplitViewState:"sourcesPanelDebuggerSidebarSplitViewState"},t={};for(const s in e){const e=re.instance().createSetting(s,t),r=e.get();r!==t&&(r.vertical&&r.vertical.size&&r.vertical.size<1&&(r.vertical.size=0),r.horizontal&&r.horizontal.size&&r.horizontal.size<1&&(r.horizontal.size=0),e.set(r))}}_updateVersionFrom7To8(){}_updateVersionFrom8To9(){const e=["skipStackFramesPattern","workspaceFolderExcludePattern"];for(let t=0;t<e.length;++t){const s=re.instance().createSetting(e[t],"");let r=s.get();if(!r)return;"string"==typeof r&&(r=[r]);for(let e=0;e<r.length;++e)"string"==typeof r[e]&&(r[e]={pattern:r[e]});s.set(r)}}_updateVersionFrom9To10(){if(window.localStorage)for(const e in window.localStorage)e.startsWith("revision-history")&&window.localStorage.removeItem(e)}_updateVersionFrom10To11(){const e=re.instance().createSetting("customDevicePresets",void 0),t=e.get();if(!Array.isArray(t))return;const s=[];for(let e=0;e<t.length;++e){const r=t[e],i={};i.title=r.title,i.type="unknown",i["user-agent"]=r.userAgent,i.capabilities=[],r.touch&&i.capabilities.push("touch"),r.mobile&&i.capabilities.push("mobile"),i.screen={},i.screen.vertical={width:r.width,height:r.height},i.screen.horizontal={width:r.height,height:r.width},i.screen["device-pixel-ratio"]=r.deviceScaleFactor,i.modes=[],i["show-by-default"]=!0,i.show="Default",s.push(i)}s.length&&re.instance().createSetting("customEmulatedDeviceList",[]).set(s),e.remove()}_updateVersionFrom11To12(){this._migrateSettingsFromLocalStorage()}_updateVersionFrom12To13(){this._migrateSettingsFromLocalStorage(),re.instance().createSetting("timelineOverviewMode","").remove()}_updateVersionFrom13To14(){const e={throughput:-1,latency:0};re.instance().createSetting("networkConditions",e).set(e)}_updateVersionFrom14To15(){const e=re.instance().createLocalSetting("workspaceExcludedFolders",{}),t=e.get(),s={};for(const e in t){s[e]=[];for(const r of t[e])s[e].push(r.path)}e.set(s)}_updateVersionFrom15To16(){const e=re.instance().createSetting("InspectorView.panelOrder",{}),t=e.get();for(const e of Object.keys(t))t[e]=10*(t[e]+1);e.set(t)}_updateVersionFrom16To17(){const e=re.instance().createSetting("networkConditionsCustomProfiles",[]),t=e.get(),s=[];if(Array.isArray(t))for(const e of t)"string"==typeof e.title&&"object"==typeof e.value&&"number"==typeof e.value.throughput&&"number"==typeof e.value.latency&&s.push({title:e.title,value:{download:e.value.throughput,upload:e.value.throughput,latency:e.value.latency}});e.set(s)}_updateVersionFrom17To18(){const e=re.instance().createLocalSetting("workspaceExcludedFolders",{}),t=e.get(),s={};for(const e in t){let r=e.replace(/\\/g,"/");r.startsWith("file://")||(r=r.startsWith("/")?"file://"+r:"file:///"+r),s[r]=t[e]}e.set(s)}_updateVersionFrom18To19(){const e=re.instance().createSetting("networkLogColumnsVisibility",{status:!0,type:!0,initiator:!0,size:!0,time:!0}),t=e.get();t.name=!0,t.timeline=!0;const s={};for(const e in t)t.hasOwnProperty(e)&&(s[e.toLowerCase()]={visible:t[e]});re.instance().createSetting("networkLogColumns",{}).set(s),e.remove()}_updateVersionFrom19To20(){const e=re.instance().createSetting("InspectorView.panelOrder",{});re.instance().createSetting("panel-tabOrder",{}).set(e.get()),e.remove()}_updateVersionFrom20To21(){const e=re.instance().createSetting("networkLogColumns",{}),t=e.get();delete t.timeline,delete t.waterfall,e.set(t)}_updateVersionFrom21To22(){const e=re.instance().createLocalSetting("breakpoints",[]),t=e.get();for(const e of t)e.url=e.sourceFileId,delete e.sourceFileId;e.set(t)}_updateVersionFrom22To23(){}_updateVersionFrom23To24(){const e=re.instance().createSetting("searchInContentScripts",!1);re.instance().createSetting("searchInAnonymousAndContentScripts",!1).set(e.get()),e.remove()}_updateVersionFrom24To25(){const e=re.instance().createSetting("networkLogColumns",{status:!0,type:!0,initiator:!0,size:!0,time:!0}),t=e.get();delete t.product,e.set(t)}_updateVersionFrom25To26(){const e=re.instance().createSetting("messageURLFilters",{}),t=Object.keys(e.get()).map(e=>"-url:"+e).join(" ");if(t){const e=re.instance().createSetting("console.textFilter",""),s=e.get()?" "+e.get():"";e.set(`${t}${s}`)}e.remove()}_updateVersionFrom26To27(){function e(e,t,s){const r=re.instance().createSetting(e,{}),i=r.get();t in i&&(i[s]=i[t],delete i[t],r.set(i))}e("panel-tabOrder","audits2","audits"),e("panel-closeableTabs","audits2","audits"),function(e,t,s){const r=re.instance().createSetting(e,"");r.get()===t&&r.set(s)}("panel-selectedTab","audits2","audits")}_updateVersionFrom27To28(){const e=re.instance().createSetting("uiTheme","systemPreferred");"default"===e.get()&&e.set("systemPreferred")}_updateVersionFrom28To29(){function e(e,t,s){const r=re.instance().createSetting(e,{}),i=r.get();t in i&&(i[s]=i[t],delete i[t],r.set(i))}e("panel-tabOrder","audits","lighthouse"),e("panel-closeableTabs","audits","lighthouse"),function(e,t,s){const r=re.instance().createSetting(e,"");r.get()===t&&r.set(s)}("panel-selectedTab","audits","lighthouse")}_updateVersionFrom29To30(){const e=re.instance().createSetting("closeableTabs",{}),t=re.instance().createSetting("panel-closeableTabs",{}),s=re.instance().createSetting("drawer-view-closeableTabs",{}),r=t.get(),i=t.get(),n=Object.assign(i,r);e.set(n),t.remove(),s.remove()}_migrateSettingsFromLocalStorage(){const e=new Set(["advancedSearchConfig","breakpoints","consoleHistory","domBreakpoints","eventListenerBreakpoints","fileSystemMapping","lastSelectedSourcesSidebarPaneTab","previouslyViewedFiles","savedURLs","watchExpressions","workspaceExcludedFolders","xhrBreakpoints"]);if(window.localStorage)for(const t in window.localStorage){if(e.has(t))continue;const s=window.localStorage[t];window.localStorage.removeItem(t),re.instance()._globalStorage.set(t,s)}}_clearBreakpointsWhenTooMany(e,t){e.get().length>t&&e.set([])}}const le={Global:Symbol("Global"),Local:Symbol("Local"),Session:Symbol("Session")};function he(e){return re.instance().moduleSetting(e)}var ce=Object.freeze({__proto__:null,Settings:re,SettingsStorage:ie,Setting:ne,RegExpSetting:oe,VersionController:ae,SettingStorageType:le,moduleSetting:he,settingForTest:function(e){return re.instance().settingForTest(e)},detectColorFormat:function(e){const t=d;let s;const r=re.instance().moduleSetting("colorFormat").get();return s=r===t.Original?t.Original:r===t.RGB?t.RGB:r===t.HSL?t.HSL:r===t.HEX?e.detectHEXFormat():t.RGB,s}});var ue=Object.freeze({__proto__:null,OutputStream:class{async write(e){}async close(){}},StringOutputStream:class{constructor(){this._data=""}async write(e){this._data+=e}async close(){}data(){return this._data}}});class ge{constructor(){this._size,this._root=0,this._edges,this._isWord,this._wordsInSubtree,this._freeNodes,this.clear()}add(e){let t=this._root;++this._wordsInSubtree[this._root];for(let s=0;s<e.length;++s){const r=e[s];let i=this._edges[t][r];i||(this._freeNodes.length?i=this._freeNodes.pop():(i=this._size++,this._isWord.push(!1),this._wordsInSubtree.push(0),this._edges.push({__proto__:null})),this._edges[t][r]=i),++this._wordsInSubtree[i],t=i}this._isWord[t]=!0}remove(e){if(!this.has(e))return!1;let t=this._root;--this._wordsInSubtree[this._root];for(let s=0;s<e.length;++s){const r=e[s],i=this._edges[t][r];--this._wordsInSubtree[i]||(delete this._edges[t][r],this._freeNodes.push(i)),t=i}return this._isWord[t]=!1,!0}has(e){let t=this._root;for(let s=0;s<e.length;++s)if(t=this._edges[t][e[s]],!t)return!1;return this._isWord[t]}words(e){e=e||"";let t=this._root;for(let s=0;s<e.length;++s)if(t=this._edges[t][e[s]],!t)return[];const s=[];return this._dfs(t,e,s),s}_dfs(e,t,s){this._isWord[e]&&s.push(t);const r=this._edges[e];for(const e in r)this._dfs(r[e],t+e,s)}longestPrefix(e,t){let s=this._root,r=0;for(let i=0;i<e.length&&(s=this._edges[s][e[i]],s);++i)t&&!this._isWord[s]||(r=i+1);return e.substring(0,r)}clear(){this._size=1,this._root=0,this._edges=[{__proto__:null}],this._isWord=[!1],this._wordsInSubtree=[0],this._freeNodes=[]}}var de=Object.freeze({__proto__:null,Trie:ge});var pe=Object.freeze({__proto__:null,TextDictionary:class{constructor(){this._words=new Map,this._index=new ge}addWord(e){let t=this._words.get(e)||0;++t,this._words.set(e,t),this._index.add(e)}removeWord(e){let t=this._words.get(e)||0;if(t){if(1===t)return this._words.delete(e),void this._index.remove(e);--t,this._words.set(e,t)}}wordsWithPrefix(e){return this._index.words(e)}hasWord(e){return this._words.has(e)}wordCount(e){return this._words.get(e)||0}reset(){this._words.clear(),this._index.clear()}}});var me=Object.freeze({__proto__:null,FinishCallback:void 0,Throttler:class{constructor(e){this._timeout=e,this._isRunningProcess=!1,this._asSoonAsPossible=!1,this._process=null,this._lastCompleteTime=0,this._schedulePromise=new Promise(e=>{this._scheduleResolve=e})}_processCompleted(){this._lastCompleteTime=this._getTime(),this._isRunningProcess=!1,this._process&&this._innerSchedule(!1),this._processCompletedForTests()}_processCompletedForTests(){}_onTimeout(){delete this._processTimeout,this._asSoonAsPossible=!1,this._isRunningProcess=!0,Promise.resolve().then(this._process).catch(console.error.bind(console)).then(this._processCompleted.bind(this)).then(this._scheduleResolve),this._schedulePromise=new Promise(e=>{this._scheduleResolve=e}),this._process=null}schedule(e,t){this._process=e;const s=!!this._processTimeout||this._isRunningProcess,r=this._getTime()-this._lastCompleteTime>this._timeout,i=(t=!!t||!s&&r)&&!this._asSoonAsPossible;return this._asSoonAsPossible=this._asSoonAsPossible||t,this._innerSchedule(i),this._schedulePromise}_innerSchedule(e){if(this._isRunningProcess)return;if(this._processTimeout&&!e)return;this._processTimeout&&this._clearTimeout(this._processTimeout);const t=this._asSoonAsPossible?0:this._timeout;this._processTimeout=this._setTimeout(this._onTimeout.bind(this),t)}_clearTimeout(e){clearTimeout(e)}_setTimeout(e,t){return window.setTimeout(e,t)}_getTime(){return window.performance.now()}}});var _e=Object.freeze({__proto__:null,WasmDisassembly:class{constructor(e,t){this._offsets=e,this._functionBodyOffsets=t}get lineNumbers(){return this._offsets.length}bytecodeOffsetToLineNumber(e){let t=0,s=this._offsets.length-1;for(;t<=s;){const r=Math.floor((t+s)/2),i=this._offsets[r];if(i<e)t=r+1;else{if(!(i>e))return r;s=r-1}}return t}lineNumberToBytecodeOffset(e){return this._offsets[e]}*nonBreakableLineNumbers(){let e=0,t=0;for(;e<this.lineNumbers;){if(t<this._functionBodyOffsets.length){if(this.lineNumberToBytecodeOffset(e)>=this._functionBodyOffsets[t].start){e=this.bytecodeOffsetToLineNumber(this._functionBodyOffsets[t++].end);continue}}yield e++}}}});var fe=Object.freeze({__proto__:null,WorkerWrapper:class{constructor(e){const t=e+".js"+location.search;this._workerPromise=new Promise(e=>{const s=new Worker(t,{type:"module"});s.onmessage=t=>{console.assert("workerReady"===t.data),s.onmessage=null,e(s)}})}postMessage(e){this._workerPromise.then(t=>{this._disposed||t.postMessage(e)})}dispose(){this._disposed=!0,this._workerPromise.then(e=>e.terminate())}terminate(){this.dispose()}set onmessage(e){this._workerPromise.then(t=>{t.onmessage=e})}set onerror(e){this._workerPromise.then(t=>{t.onerror=e})}}});const Se=s.ls;let be;export{i as App,n as AppProvider,o as CharacterIdMap,S as Color,c as ColorUtils,V as Console,O as Debouncer,E as EventTarget,F as JavaScriptMetaData,I as Lazy,N as Linkifier,w as ObjectWrapper,H as ParsedURL,G as Progress,D as QueryParamHandler,K as ResourceType,x as Revealer,Y as Runnable,te as SegmentedRange,ce as Settings,ue as StringOutputStream,pe as TextDictionary,me as Throttler,de as Trie,_e as WasmDisassembly,fe as Worker,Se as ls,be as settings};
