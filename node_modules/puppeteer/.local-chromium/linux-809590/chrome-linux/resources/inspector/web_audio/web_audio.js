import{ObjectWrapper as e}from"../common/common.js";import{UIUtils as t,ListModel as o,SoftDropDown as n,Toolbar as d,Utils as a,Fragment as s,ThrottledWidget as i,Widget as r}from"../ui/ui.js";import{SDKModel as h,ResourceTreeModel as l}from"../sdk/sdk.js";const c={In:Symbol("In"),Out:Symbol("Out"),Param:Symbol("Param")};var u=Object.freeze({__proto__:null,PortPadding:4,InputPortRadius:10,AudioParamRadius:5,LeftMarginOfText:12,RightMarginOfText:30,LeftSideTopPadding:5,BottomPaddingWithoutParam:6,BottomPaddingWithParam:8,ArrowHeadSize:12,GraphPadding:20,GraphMargin:20,TotalInputPortHeight:24,TotalOutputPortHeight:24,TotalParamPortHeight:14,NodeLabelFontStyle:"14px Segoe UI, Arial",ParamLabelFontStyle:"12px Segoe UI, Arial",PortTypes:c,Size:void 0,Point:void 0,NodeLayout:void 0,Port:void 0,NodeCreationData:void 0,ParamCreationData:void 0,NodesConnectionData:void 0,NodesDisconnectionData:void 0,NodesDisconnectionDataWithDestination:void 0,NodeParamConnectionData:void 0,NodeParamDisconnectionData:void 0});const m=e=>({x:0,y:15+24*e}),p=(e,t,o)=>{const{width:n,height:d}=t;return{x:n,y:d/2+24*(2*e-o+1)/2}},_=(e,t)=>({x:0,y:t+14*(e+1)-5});var g=Object.freeze({__proto__:null,calculateInputPortXY:m,calculateOutputPortXY:p,calculateParamPortXY:_});class x{constructor(e,t){this.id=e.nodeId,this.type=e.nodeType,this.numberOfInputs=e.numberOfInputs,this.numberOfOutputs=e.numberOfOutputs,this.label=t,this.size={width:0,height:0},this.position=null,this._layout={inputPortSectionHeight:0,outputPortSectionHeight:0,maxTextLength:0,totalHeight:0},this.ports=new Map,this._initialize(e)}_initialize(e){this._updateNodeLayoutAfterAddingNode(e),this._setupInputPorts(),this._setupOutputPorts()}addParamPort(e,t){const o=this.getPortsByType(c.Param).length,{x:n,y:d}=_(o,this._layout.inputPortSectionHeight);this._addPort({id:y(this.id,e),type:c.Param,label:t,x:n,y:d}),this._updateNodeLayoutAfterAddingParam(o+1,t),this._setupOutputPorts()}getPortsByType(e){const t=[];return this.ports.forEach(o=>{o.type===e&&t.push(o)}),t}_updateNodeLayoutAfterAddingNode(e){const t=24*Math.max(1,e.numberOfInputs)+5;this._layout.inputPortSectionHeight=t,this._layout.outputPortSectionHeight=24*e.numberOfOutputs,this._layout.totalHeight=Math.max(t+6,this._layout.outputPortSectionHeight);const o=P(this.label,"14px Segoe UI, Arial");this._layout.maxTextLength=Math.max(this._layout.maxTextLength,o),this._updateNodeSize()}_updateNodeLayoutAfterAddingParam(e,t){const o=this._layout.inputPortSectionHeight+14*e+8;this._layout.totalHeight=Math.max(o,this._layout.outputPortSectionHeight);const n=P(t,"12px Segoe UI, Arial");this._layout.maxTextLength=Math.max(this._layout.maxTextLength,n),this._updateNodeSize()}_updateNodeSize(){this.size={width:Math.ceil(12+this._layout.maxTextLength+30),height:this._layout.totalHeight}}_setupInputPorts(){for(let e=0;e<this.numberOfInputs;e++){const{x:t,y:o}=m(e);this._addPort({id:I(this.id,e),type:c.In,x:t,y:o})}}_setupOutputPorts(){for(let e=0;e<this.numberOfOutputs;e++){const t=C(this.id,e),{x:o,y:n}=p(e,this.size,this.numberOfOutputs);if(this.ports.has(t)){const e=this.ports.get(t);e.x=o,e.y=n}else this._addPort({id:t,type:c.Out,x:o,y:n})}}_addPort(e){this.ports.set(e.id,e)}}const I=(e,t)=>`${e}-input-${t||0}`,C=(e,t)=>`${e}-output-${t||0}`,y=(e,t)=>`${e}-param-${t}`;class v{constructor(){this._totalNumberOfNodes=0}generateLabel(e){e.endsWith("Node")&&(e=e.slice(0,e.length-4)),this._totalNumberOfNodes+=1;return`${e} ${this._totalNumberOfNodes}`}}let b;const P=(e,o)=>{b||(b=createElement("canvas").getContext("2d"));const n=b;n.save(),n.font=o;const d=t.measureTextWidth(n,e);return n.restore(),d};var N=Object.freeze({__proto__:null,NodeView:x,generateInputPortId:I,generateOutputPortId:C,generateParamPortId:y,NodeLabelGenerator:v,measureTextWidth:P});class E{constructor(e,t){const{edgeId:o,sourcePortId:n,destinationPortId:d}=L(e,t);this.id=o,this.type=t,this.sourceId=e.sourceId,this.destinationId=e.destinationId,this.sourcePortId=n,this.destinationPortId=d}}const L=(e,t)=>{if(!e.sourceId||!e.destinationId)return console.error("Undefined node message: "+JSON.stringify(e)),null;const o=C(e.sourceId,e.sourceOutputIndex),n=function(e,t){if(t===S.NodeToNode)return I(e.destinationId,e.destinationInputIndex);if(t===S.NodeToParam)return y(e.destinationId,e.destinationParamId);return console.error("Unknown edge type: "+t),""}(e,t);return{edgeId:`${o}->${n}`,sourcePortId:o,destinationPortId:n}},S={NodeToNode:Symbol("NodeToNode"),NodeToParam:Symbol("NodeToParam")};var f=Object.freeze({__proto__:null,EdgeView:E,generateEdgePortIdsByData:L,EdgeTypes:S});class T extends Common.Object{constructor(e){super(),this.contextId=e,this._nodes=new Map,this._edges=new Map,this._outboundEdgeMap=new Platform.Multimap,this._inboundEdgeMap=new Platform.Multimap,this._nodeLabelGenerator=new v,this._paramIdToNodeIdMap=new Map}addNode(e){const t=this._nodeLabelGenerator.generateLabel(e.nodeType),o=new x(e,t);this._nodes.set(e.nodeId,o),this._notifyShouldRedraw()}removeNode(e){this._outboundEdgeMap.get(e).forEach(e=>this._removeEdge(e)),this._inboundEdgeMap.get(e).forEach(e=>this._removeEdge(e)),this._nodes.delete(e),this._notifyShouldRedraw()}addParam(e){const t=this.getNodeById(e.nodeId);t?(t.addParamPort(e.paramId,e.paramType),this._paramIdToNodeIdMap.set(e.paramId,e.nodeId),this._notifyShouldRedraw()):console.error("AudioNode should be added before AudioParam")}removeParam(e){this._paramIdToNodeIdMap.delete(e)}addNodeToNodeConnection(e){const t=new E(e,S.NodeToNode);this._addEdge(t)}removeNodeToNodeConnection(e){if(e.destinationId){const{edgeId:t}=L(e,S.NodeToNode);this._removeEdge(t)}else this._outboundEdgeMap.get(e.sourceId).forEach(e=>this._removeEdge(e))}addNodeToParamConnection(e){const t=new E(e,S.NodeToParam);this._addEdge(t)}removeNodeToParamConnection(e){const{edgeId:t}=L(e,S.NodeToParam);this._removeEdge(t)}getNodeById(e){return this._nodes.get(e)}getNodes(){return this._nodes}getEdges(){return this._edges}getNodeIdByParamId(e){return this._paramIdToNodeIdMap.get(e)}_addEdge(e){const t=e.sourceId;this._outboundEdgeMap.hasValue(t,e.id)||(this._edges.set(e.id,e),this._outboundEdgeMap.set(t,e.id),this._inboundEdgeMap.set(e.destinationId,e.id),this._notifyShouldRedraw())}_removeEdge(e){const t=this._edges.get(e);t&&(this._outboundEdgeMap.delete(t.sourceId,e),this._inboundEdgeMap.delete(t.destinationId,e),this._edges.delete(e),this._notifyShouldRedraw())}_notifyShouldRedraw(){this.dispatchEventToListeners(w.ShouldRedraw,this)}}const w={ShouldRedraw:Symbol("ShouldRedraw")};var M=Object.freeze({__proto__:null,GraphView:T,Events:w});class D extends e.ObjectWrapper{constructor(){super(),this._graphMapByContextId=new Map}createContext(e){const t=new T(e);t.addEventListener(w.ShouldRedraw,this._notifyShouldRedraw,this),this._graphMapByContextId.set(e,t)}destroyContext(e){if(!this._graphMapByContextId.has(e))return;this._graphMapByContextId.get(e).removeEventListener(w.ShouldRedraw,this._notifyShouldRedraw,this),this._graphMapByContextId.delete(e)}hasContext(e){return this._graphMapByContextId.has(e)}clearGraphs(){this._graphMapByContextId.clear()}getGraph(e){return this._graphMapByContextId.get(e)}_notifyShouldRedraw(e){const t=e.data;this.dispatchEventToListeners(w.ShouldRedraw,t)}}var A=Object.freeze({__proto__:null,GraphManager:D});class O extends h.SDKModel{constructor(e){super(e),this._enabled=!1,this._agent=e.webAudioAgent(),e.registerWebAudioDispatcher(this),h.TargetManager.instance().addModelListener(l.ResourceTreeModel,l.Events.FrameNavigated,this._flushContexts,this)}_flushContexts(){this.dispatchEventToListeners(B.ModelReset)}suspendModel(){return this.dispatchEventToListeners(B.ModelSuspend),this._agent.disable()}resumeModel(){return this._enabled?this._agent.enable():Promise.resolve()}ensureEnabled(){this._enabled||(this._agent.enable(),this._enabled=!0)}contextCreated(e){this.dispatchEventToListeners(B.ContextCreated,e)}contextWillBeDestroyed(e){this.dispatchEventToListeners(B.ContextDestroyed,e)}contextChanged(e){this.dispatchEventToListeners(B.ContextChanged,e)}audioListenerCreated(e){this.dispatchEventToListeners(B.AudioListenerCreated,e)}audioListenerWillBeDestroyed(e,t){this.dispatchEventToListeners(B.AudioListenerWillBeDestroyed,{contextId:e,listenerId:t})}audioNodeCreated(e){this.dispatchEventToListeners(B.AudioNodeCreated,e)}audioNodeWillBeDestroyed(e,t){this.dispatchEventToListeners(B.AudioNodeWillBeDestroyed,{contextId:e,nodeId:t})}audioParamCreated(e){this.dispatchEventToListeners(B.AudioParamCreated,e)}audioParamWillBeDestroyed(e,t,o){this.dispatchEventToListeners(B.AudioParamWillBeDestroyed,{contextId:e,paramId:o})}nodesConnected(e,t,o,n,d){this.dispatchEventToListeners(B.NodesConnected,{contextId:e,sourceId:t,destinationId:o,sourceOutputIndex:n,destinationInputIndex:d})}nodesDisconnected(e,t,o,n,d){this.dispatchEventToListeners(B.NodesDisconnected,{contextId:e,sourceId:t,destinationId:o,sourceOutputIndex:n,destinationInputIndex:d})}nodeParamConnected(e,t,o,n){this.dispatchEventToListeners(B.NodeParamConnected,{contextId:e,sourceId:t,destinationId:o,sourceOutputIndex:n})}nodeParamDisconnected(e,t,o,n){this.dispatchEventToListeners(B.NodeParamDisconnected,{contextId:e,sourceId:t,destinationId:o,sourceOutputIndex:n})}async requestRealtimeData(e){return await this._agent.getRealtimeData(e)}}h.SDKModel.register(O,h.Capability.DOM,!1);const B={ContextCreated:Symbol("ContextCreated"),ContextDestroyed:Symbol("ContextDestroyed"),ContextChanged:Symbol("ContextChanged"),ModelReset:Symbol("ModelReset"),ModelSuspend:Symbol("ModelSuspend"),AudioListenerCreated:Symbol("AudioListenerCreated"),AudioListenerWillBeDestroyed:Symbol("AudioListenerWillBeDestroyed"),AudioNodeCreated:Symbol("AudioNodeCreated"),AudioNodeWillBeDestroyed:Symbol("AudioNodeWillBeDestroyed"),AudioParamCreated:Symbol("AudioParamCreated"),AudioParamWillBeDestroyed:Symbol("AudioParamWillBeDestroyed"),NodesConnected:Symbol("NodesConnected"),NodesDisconnected:Symbol("NodesDisconnected"),NodeParamConnected:Symbol("NodeParamConnected"),NodeParamDisconnected:Symbol("NodeParamDisconnected")};var W=Object.freeze({__proto__:null,WebAudioModel:O,Events:B});class R extends e.ObjectWrapper{constructor(){super(),this._placeholderText=ls`(no recordings)`,this._items=new o.ListModel,this._dropDown=new n.SoftDropDown(this._items,this),this._dropDown.setPlaceholderText(this._placeholderText),this._toolbarItem=new d.ToolbarItem(this._dropDown.element),this._toolbarItem.setEnabled(!1),this._toolbarItem.setTitle(ls`Audio context: ${this._placeholderText}`),this._items.addEventListener(o.Events.ItemsReplaced,this._onListItemReplaced,this),this._toolbarItem.element.classList.add("toolbar-has-dropdown"),this._selectedContext=null}_onListItemReplaced(){const e=!!this._items.length;this._toolbarItem.setEnabled(e),e||this._toolbarItem.setTitle(ls`Audio context: ${this._placeholderText}`)}contextCreated(e){const t=e.data;this._items.insert(this._items.length,t),1===this._items.length&&this._dropDown.selectItem(t)}contextDestroyed(e){const t=e.data,o=this._items.findIndex(e=>e.contextId===t);o>-1&&this._items.remove(o)}contextChanged(e){const t=e.data,o=this._items.findIndex(e=>e.contextId===t.contextId);o>-1&&(this._items.replace(o,t),this._selectedContext&&this._selectedContext.contextId===t.contextId&&this._dropDown.selectItem(t))}createElementForItem(e){const t=document.createElement("div");return a.createShadowRootWithCoreStyles(t,"web_audio/audioContextSelector.css").createChild("div","title").createTextChild(this.titleFor(e).trimEndWithMaxLength(100)),t}selectedContext(){return this._selectedContext?this._selectedContext:null}highlightedItemChanged(e,t,o,n){o&&o.classList.remove("highlighted"),n&&n.classList.add("highlighted")}isItemSelectable(e){return!0}itemSelected(e){e&&(this._selectedContext&&this._selectedContext.contextId===e.contextId||(this._selectedContext=e,this._toolbarItem.setTitle(ls`Audio context: ${this.titleFor(e)}`)),this.dispatchEventToListeners(WebAudio.AudioContextSelector.Events.ContextSelected,e))}reset(){this._items.replaceAll([])}titleFor(e){return`${e.contextType} (${e.contextId.substr(-6)})`}toolbarItem(){return this._toolbarItem}}const $={ContextSelected:Symbol("ContextSelected")};var z=Object.freeze({__proto__:null,AudioContextSelector:R,Events:$});class G{constructor(e){this._fragment=createDocumentFragment(),this._container=document.createElement("div"),this._container.classList.add("context-detail-container"),this._fragment.appendChild(this._container),this._build(e)}_build(e){const t="realtime"===e.contextType?ls`AudioContext`:ls`OfflineAudioContext`;this._addTitle(t,e.contextId),this._addEntry(ls`State`,e.contextState),this._addEntry(ls`Sample Rate`,e.sampleRate,"Hz"),"realtime"===e.contextType&&this._addEntry(ls`Callback Buffer Size`,e.callbackBufferSize,"frames"),this._addEntry(ls`Max Output Channels`,e.maxOutputChannelCount,"ch")}_addTitle(e,t){this._container.appendChild(s.html`
      <div class="context-detail-header">
        <div class="context-detail-title">${e}</div>
        <div class="context-detail-subtitle">${t}</div>
      </div>
    `)}_addEntry(e,t,o){const n=t+(o?" "+o:"");this._container.appendChild(s.html`
      <div class="context-detail-row">
        <div class="context-detail-row-entry">${e}</div>
        <div class="context-detail-row-value">${n}</div>
      </div>
    `)}getFragment(){return this._fragment}}class V{constructor(e,t){const o=t.currentTime.toFixed(3),n=(1e3*t.callbackIntervalMean).toFixed(3),d=(1e3*Math.sqrt(t.callbackIntervalVariance)).toFixed(3),a=(100*t.renderCapacity).toFixed(3);this._fragment=createDocumentFragment(),this._fragment.appendChild(s.html`
      <div class="context-summary-container">
        <span>${ls`Current Time`}: ${o} s</span>
        <span>\u2758</span>
        <span>${ls`Callback Interval`}: μ = ${n} ms, σ = ${d} ms</span>
        <span>\u2758</span>
        <span>${ls`Render Capacity`}: ${a} %</span>
      </div>
    `)}getFragment(){return this._fragment}}var F=Object.freeze({__proto__:null,ContextDetailBuilder:G,ContextSummaryBuilder:V});class H extends i.ThrottledWidget{constructor(){super(!0,1e3),this.element.classList.add("web-audio-drawer"),this.registerRequiredCSS("web_audio/webAudio.css");const e=this.contentElement.createChild("div","web-audio-toolbar-container vbox");this._contextSelector=new R;const t=new d.Toolbar("web-audio-toolbar",e);t.appendToolbarItem(d.Toolbar.createActionButtonForId("components.collect-garbage")),t.appendSeparator(),t.appendToolbarItem(this._contextSelector.toolbarItem()),this._contentContainer=this.contentElement.createChild("div","web-audio-content-container vbox flex-auto"),this._detailViewContainer=this._contentContainer.createChild("div","web-audio-details-container vbox flex-auto"),this._graphManager=new D,this._landingPage=new r.VBox,this._landingPage.contentElement.classList.add("web-audio-landing-page","fill"),this._landingPage.contentElement.appendChild(s.html`
      <div>
        <p>${ls`Open a page that uses Web Audio API to start monitoring.`}</p>
      </div>
    `),this._landingPage.show(this._detailViewContainer),this._summaryBarContainer=this._contentContainer.createChild("div","web-audio-summary-container"),this._contextSelector.addEventListener($.ContextSelected,e=>{const t=e.data;this._updateDetailView(t),this.doUpdate()}),h.TargetManager.instance().observeModels(O,this)}wasShown(){super.wasShown();for(const e of h.TargetManager.instance().models(O))this._addEventListeners(e)}willHide(){for(const e of h.TargetManager.instance().models(O))this._removeEventListeners(e)}modelAdded(e){this.isShowing()&&this._addEventListeners(e)}modelRemoved(e){this._removeEventListeners(e)}async doUpdate(){await this._pollRealtimeData(),this.update()}_addEventListeners(e){e.ensureEnabled(),e.addEventListener(B.ContextCreated,this._contextCreated,this),e.addEventListener(B.ContextDestroyed,this._contextDestroyed,this),e.addEventListener(B.ContextChanged,this._contextChanged,this),e.addEventListener(B.ModelReset,this._reset,this),e.addEventListener(B.ModelSuspend,this._suspendModel,this),e.addEventListener(B.AudioListenerCreated,this._audioListenerCreated,this),e.addEventListener(B.AudioListenerWillBeDestroyed,this._audioListenerWillBeDestroyed,this),e.addEventListener(B.AudioNodeCreated,this._audioNodeCreated,this),e.addEventListener(B.AudioNodeWillBeDestroyed,this._audioNodeWillBeDestroyed,this),e.addEventListener(B.AudioParamCreated,this._audioParamCreated,this),e.addEventListener(B.AudioParamWillBeDestroyed,this._audioParamWillBeDestroyed,this),e.addEventListener(B.NodesConnected,this._nodesConnected,this),e.addEventListener(B.NodesDisconnected,this._nodesDisconnected,this),e.addEventListener(B.NodeParamConnected,this._nodeParamConnected,this),e.addEventListener(B.NodeParamDisconnected,this._nodeParamDisconnected,this)}_removeEventListeners(e){e.removeEventListener(B.ContextCreated,this._contextCreated,this),e.removeEventListener(B.ContextDestroyed,this._contextDestroyed,this),e.removeEventListener(B.ContextChanged,this._contextChanged,this),e.removeEventListener(B.ModelReset,this._reset,this),e.removeEventListener(B.ModelSuspend,this._suspendModel,this),e.removeEventListener(B.AudioListenerCreated,this._audioListenerCreated,this),e.removeEventListener(B.AudioListenerWillBeDestroyed,this._audioListenerWillBeDestroyed,this),e.removeEventListener(B.AudioNodeCreated,this._audioNodeCreated,this),e.removeEventListener(B.AudioNodeWillBeDestroyed,this._audioNodeWillBeDestroyed,this),e.removeEventListener(B.AudioParamCreated,this._audioParamCreated,this),e.removeEventListener(B.AudioParamWillBeDestroyed,this._audioParamWillBeDestroyed,this),e.removeEventListener(B.NodesConnected,this._nodesConnected,this),e.removeEventListener(B.NodesDisconnected,this._nodesDisconnected,this),e.removeEventListener(B.NodeParamConnected,this._nodeParamConnected,this),e.removeEventListener(B.NodeParamDisconnected,this._nodeParamDisconnected,this)}_contextCreated(e){const t=e.data;this._graphManager.createContext(t.contextId),this._contextSelector.contextCreated(e)}_contextDestroyed(e){const t=e.data;this._graphManager.destroyContext(t),this._contextSelector.contextDestroyed(e)}_contextChanged(e){const t=e.data;this._graphManager.hasContext(t.contextId)&&this._contextSelector.contextChanged(e)}_reset(){this._landingPage.isShowing()&&this._landingPage.detach(),this._contextSelector.reset(),this._detailViewContainer.removeChildren(),this._landingPage.show(this._detailViewContainer),this._graphManager.clearGraphs()}_suspendModel(){this._graphManager.clearGraphs()}_audioListenerCreated(e){const t=e.data,o=this._graphManager.getGraph(t.contextId);o&&o.addNode({nodeId:t.listenerId,nodeType:"Listener",numberOfInputs:0,numberOfOutputs:0})}_audioListenerWillBeDestroyed(e){const{contextId:t,listenerId:o}=e.data,n=this._graphManager.getGraph(t);n&&n.removeNode(o)}_audioNodeCreated(e){const t=e.data,o=this._graphManager.getGraph(t.contextId);o&&o.addNode({nodeId:t.nodeId,nodeType:t.nodeType,numberOfInputs:t.numberOfInputs,numberOfOutputs:t.numberOfOutputs})}_audioNodeWillBeDestroyed(e){const{contextId:t,nodeId:o}=e.data,n=this._graphManager.getGraph(t);n&&n.removeNode(o)}_audioParamCreated(e){const t=e.data,o=this._graphManager.getGraph(t.contextId);o&&o.addParam({paramId:t.paramId,paramType:t.paramType,nodeId:t.nodeId})}_audioParamWillBeDestroyed(e){const{contextId:t,paramId:o}=e.data,n=this._graphManager.getGraph(t);n&&n.removeParam(o)}_nodesConnected(e){const{contextId:t,sourceId:o,destinationId:n,sourceOutputIndex:d,destinationInputIndex:a}=e.data,s=this._graphManager.getGraph(t);s&&s.addNodeToNodeConnection({sourceId:o,destinationId:n,sourceOutputIndex:d,destinationInputIndex:a})}_nodesDisconnected(e){const{contextId:t,sourceId:o,destinationId:n,sourceOutputIndex:d,destinationInputIndex:a}=e.data,s=this._graphManager.getGraph(t);s&&s.removeNodeToNodeConnection({sourceId:o,destinationId:n,sourceOutputIndex:d,destinationInputIndex:a})}_nodeParamConnected(e){const{contextId:t,sourceId:o,destinationId:n,sourceOutputIndex:d}=e.data,a=this._graphManager.getGraph(t);if(!a)return;const s=a.getNodeIdByParamId(n);s&&a.addNodeToParamConnection({sourceId:o,destinationId:s,sourceOutputIndex:d,destinationParamId:n})}_nodeParamDisconnected(e){const{contextId:t,sourceId:o,destinationId:n,sourceOutputIndex:d}=e.data,a=this._graphManager.getGraph(t);if(!a)return;const s=a.getNodeIdByParamId(n);s&&a.removeNodeToParamConnection({sourceId:o,destinationId:s,sourceOutputIndex:d,destinationParamId:n})}_updateDetailView(e){this._landingPage.isShowing()&&this._landingPage.detach();const t=new G(e);this._detailViewContainer.removeChildren(),this._detailViewContainer.appendChild(t.getFragment())}_updateSummaryBar(e,t){const o=new V(e,t);this._summaryBarContainer.removeChildren(),this._summaryBarContainer.appendChild(o.getFragment())}_clearSummaryBar(){this._summaryBarContainer.removeChildren()}async _pollRealtimeData(){const e=this._contextSelector.selectedContext();if(e)for(const t of h.TargetManager.instance().models(WebAudio.WebAudioModel))if("realtime"===e.contextType){if(!this._graphManager.hasContext(e.contextId))continue;const o=await t.requestRealtimeData(e.contextId);o&&this._updateSummaryBar(e.contextId,o)}else this._clearSummaryBar();else this._clearSummaryBar()}}var j=Object.freeze({__proto__:null,WebAudioView:H});export{F as AudioContextContentBuilder,z as AudioContextSelector,f as EdgeView,A as GraphManager,u as GraphStyle,M as GraphView,g as NodeRendererUtility,N as NodeView,W as WebAudioModel,j as WebAudioView};
