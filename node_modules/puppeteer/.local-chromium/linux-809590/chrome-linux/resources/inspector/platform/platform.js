const t=(t,e)=>{let r=!1;for(let n=0;n<e.length;++n)if(-1!==t.indexOf(e.charAt(n))){r=!0;break}if(!r)return String(t);let n="";for(let r=0;r<t.length;++r)-1!==e.indexOf(t.charAt(r))&&(n+="\\"),n+=t.charAt(r);return n},e="string",r="specifier";const n=function(t,n){const i=[];function o(t){t&&(i.length&&i[i.length-1].type===e?i[i.length-1].value+=t:i.push({type:e,value:t,specifier:void 0,precision:void 0,substitutionIndex:void 0}))}function s(t,e,n){i.push({type:r,specifier:t,precision:e,substitutionIndex:n,value:void 0})}function u(t){const e=["black","red","green","yellow","blue","magenta","cyan","lightGray","","default"],n=["darkGray","lightRed","lightGreen","lightYellow","lightBlue","lightMagenta","lightCyan","white",""],o={color:e,colorLight:n,bgColor:e,bgColorLight:n},s={3:"color",9:"colorLight",4:"bgColor",10:"bgColorLight"}[Math.floor(t/10)];if(!s)return;const u=o[s][t%10];u&&i.push({type:r,specifier:"c",value:{description:(s.startsWith("bg")?"background : ":"color: ")+u},precision:void 0,substitutionIndex:void 0})}let a=0,l=0;const c=new RegExp(`%%|%(?:(\\d+)\\$)?(?:\\.(\\d*))?([${Object.keys(n).join("")}])|\\u001b\\[(\\d+)m`,"g");for(let e=c.exec(t);e;e=c.exec(t)){const r=e.index;if(r>a&&o(t.substring(a,r)),"%%"===e[0])o("%");else if(e[0].startsWith("%")){const[t,r,n,i]=e;r&&Number(r)>0&&(l=Number(r)-1);s(i,n?Number(n):-1,l),++l}else{u(Number(e[4]))}a=r+e[0].length}return o(t.substring(a)),i},i=function(t,i,o,s,u,a){if(!t||(!i||!i.length)&&-1===t.search(/\u001b\[(\d+)m/))return{formattedResult:u(s,t),unusedSubstitutions:i};function l(){return'String.format("'+t+'", "'+Array.prototype.join.call(i,'", "')+'")'}function c(t){console.error(l()+": "+t)}let f=s;const p=a||n(t,o),h={},g=i||[];for(let t=0;t<p.length;++t){const n=p[t];n.type!==e?n.type===r?!n.value&&void 0!==n.substitutionIndex&&n.substitutionIndex>=g.length?(c("not enough substitution arguments. Had "+g.length+" but needed "+(n.substitutionIndex+1)+", so substitution was skipped."),f=u(f,"%"+(void 0!==n.precision&&n.precision>-1?n.precision:"")+n.specifier)):(n.value||void 0===n.substitutionIndex||(h[n.substitutionIndex]=!0),void 0!==n.specifier&&n.specifier in o?f=u(f,o[n.specifier](n.value||void 0!==n.substitutionIndex&&g[n.substitutionIndex],n)):(d="unsupported format character “"+n.specifier+"”. Treating as a string.",console.warn(l()+": "+d),f=u(f,n.value||void 0===n.substitutionIndex?"":g[n.substitutionIndex]))):c('Unknown token type "'+n.type+'" found.'):f=u(f,n.value)}var d;const y=[];for(let t=0;t<g.length;++t)t in h||y.push(g[t]);return{formattedResult:f,unusedSubstitutions:y}},o={d:function(t){return isNaN(t)?0:t},f:function(t,e){t&&void 0!==e.precision&&e.precision>-1&&(t=t.toFixed(e.precision));const r=void 0!==e.precision&&e.precision>-1?Number(0).toFixed(e.precision):0;return isNaN(t)?r:t},s:function(t){return t}},s=function(t,e){return i(t,e,o,"",(function(t,e){return t+e})).formattedResult},u=function(t,e){return s(t,Array.prototype.slice.call(arguments,1))},a=(t,e)=>{const r=[];let n=t.indexOf(e);for(;-1!==n;)r.push(n),n=t.indexOf(e,n+e.length);return r},l=function(){return"^[]{}()\\.^$*+?|-,"};var c=Object.freeze({__proto__:null,escapeCharacters:t,FORMATTER_TOKEN:void 0,tokenizeFormatString:n,format:i,standardFormatters:o,vsprintf:s,sprintf:u,toBase64:t=>{function e(t){return t<26?t+65:t<52?t+71:t<62?t-4:62===t?43:63===t?47:65}const r=(new TextEncoder).encode(t.toString()),n=r.length;let i,o="";if(0===n)return o;let s=0;for(let t=0;t<n;t++)i=t%3,s|=r[t]<<(16>>>i&24),2===i&&(o+=String.fromCharCode(e(s>>>18&63),e(s>>>12&63),e(s>>>6&63),e(63&s)),s=0);return 0===i?o+=String.fromCharCode(e(s>>>18&63),e(s>>>12&63),61,61):1===i&&(o+=String.fromCharCode(e(s>>>18&63),e(s>>>12&63),e(s>>>6&63),61)),o},findIndexesOfSubString:a,findLineEndingIndexes:t=>{const e=a(t,"\n");return e.push(t.length),e},isWhitespace:t=>/^\s*$/.test(t),trimURL:(t,e)=>{let r=t.replace(/^(https|http|file):\/\//i,"");return e&&r.toLowerCase().startsWith(e.toLowerCase())&&(r=r.substr(e.length)),r},collapseWhitespace:t=>t.replace(/[\s\xA0]+/g," "),reverse:t=>t.split("").reverse().join(""),replaceControlCharacters:t=>t.replace(/[\0-\x08\x0B\f\x0E-\x1F\x80-\x9F]/g,"�"),countWtf8Bytes:t=>{let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);if(n<=127)e++;else if(n<=2047)e+=2;else if(n<55296||57343<n)e+=3;else{if(n<=56319&&r+1<t.length){const n=t.charCodeAt(r+1);if(56320<=n&&n<=57343){e+=4,r++;continue}}e+=3}}return e},stripLineBreaks:t=>t.replace(/(\r)?\n/g,""),toTitleCase:t=>t.substring(0,1).toUpperCase()+t.substring(1),removeURLFragment:t=>{const e=new URL(t);return e.hash="",e.toString()},regexSpecialCharacters:l,filterRegex:function(t){const e="^[]{}()\\.^$*+?|-,";let r="";for(let n=0;n<t.length;++n){let i=t.charAt(n);-1!==e.indexOf(i)&&(i="\\"+i),n&&(r+="[^\\0"+i+"]*"),r+=i}return new RegExp(r,"i")}});String.sprintf=u,String.regexSpecialCharacters=l,String.prototype.escapeForRegExp=function(){return t(this,String.regexSpecialCharacters())},String.prototype.trimMiddle=function(t){if(this.length<=t)return String(this);let e=t>>1,r=t-e-1;return this.codePointAt(this.length-r-1)>=65536&&(--r,++e),e>0&&this.codePointAt(e-1)>=65536&&--e,this.substr(0,e)+"…"+this.substr(this.length-r,r)},String.prototype.trimEndWithMaxLength=function(t){return this.length<=t?String(this):this.substr(0,t-1)+"…"},String.prototype.compareTo=function(t){return this>t?1:this<t?-1:0},String.hashCode=function(t){if(!t)return 0;const e=4294967291;let r=0,n=1;for(let i=0;i<t.length;i++){r=(r+n*(1506996573*t.charCodeAt(i)))%e,n=1345575271*n%e}return r=(r+n*(e-1))%e,Math.abs(0|r)},String.naturalOrderComparator=function(t,e){const r=/^\d+|^\D+/;let n,i,o,s;for(;;){if(!t)return e?-1:0;if(!e)return 1;if(n=t.match(r)[0],i=e.match(r)[0],o=!isNaN(n),s=!isNaN(i),o&&!s)return-1;if(s&&!o)return 1;if(o&&s){const t=n-i;if(t)return t;if(n.length!==i.length)return+n||+i?i.length-n.length:n.length-i.length}else if(n!==i)return n<i?-1:1;t=t.substring(n.length),e=e.substring(i.length)}},String.caseInsensetiveComparator=function(t,e){return(t=t.toUpperCase())===(e=e.toUpperCase())?0:t>e?1:-1},Number.toFixedIfFloating=function(t){if(!t||isNaN(t))return t;const e=Number(t);return e%1?e.toFixed(3):String(e)},function(){const t={value:function(t,e,r,n){function i(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}const o=this[n];i(this,r,n);let s=e;for(let n=e;n<r;++n)t(this[n],o)<0&&(i(this,s,n),++s);return i(this,r,s),s},configurable:!0};Object.defineProperty(Array.prototype,"partition",t),Object.defineProperty(Uint32Array.prototype,"partition",t);const e={value:function(t,e,r,n,i){return 0===e&&r===this.length-1&&0===n&&i>=r?this.sort(t):function t(e,r,n,i,o,s){if(i<=n)return;const u=Math.floor(Math.random()*(i-n))+n,a=e.partition(r,n,i,u);o<a&&t(e,r,n,a-1,o,s),a<s&&t(e,r,a+1,i,o,s)}(this,t,e,r,n,i),this},configurable:!0};Object.defineProperty(Array.prototype,"sortRange",e),Object.defineProperty(Uint32Array.prototype,"sortRange",e)}(),Object.defineProperty(Array.prototype,"lowerBound",{value:function(t,e,r,n){e=e||function(t,e){return t<e?-1:t>e?1:0};let i=r||0,o=void 0!==n?n:this.length;for(;i<o;){const r=i+o>>1;e(t,this[r])>0?i=r+1:o=r}return o},configurable:!0}),Object.defineProperty(Array.prototype,"upperBound",{value:function(t,e,r,n){e=e||function(t,e){return t<e?-1:t>e?1:0};let i=r||0,o=void 0!==n?n:this.length;for(;i<o;){const r=i+o>>1;e(t,this[r])>=0?i=r+1:o=r}return o},configurable:!0}),Object.defineProperty(Uint32Array.prototype,"lowerBound",{value:Array.prototype.lowerBound,configurable:!0}),Object.defineProperty(Uint32Array.prototype,"upperBound",{value:Array.prototype.upperBound,configurable:!0}),Object.defineProperty(Int32Array.prototype,"lowerBound",{value:Array.prototype.lowerBound,configurable:!0}),Object.defineProperty(Int32Array.prototype,"upperBound",{value:Array.prototype.upperBound,configurable:!0}),Object.defineProperty(Float64Array.prototype,"lowerBound",{value:Array.prototype.lowerBound,configurable:!0}),Object.defineProperty(Array.prototype,"binaryIndexOf",{value:function(t,e){const r=this.lowerBound(t,e);return r<this.length&&0===e(t,this[r])?r:-1},configurable:!0}),Object.defineProperty(Array.prototype,"peekLast",{value:function(){return this[this.length-1]},configurable:!0}),function(){function t(t,e,r,n){const i=[];let o=0,s=0;for(;o<t.length&&s<e.length;){const u=r(t[o],e[s]);!n&&u||i.push(u<=0?t[o]:e[s]),u<=0&&o++,u>=0&&s++}if(n){for(;o<t.length;)i.push(t[o++]);for(;s<e.length;)i.push(e[s++])}return i}Object.defineProperty(Array.prototype,"intersectOrdered",{value:function(e,r){return t(this,e,r,!1)},configurable:!0}),Object.defineProperty(Array.prototype,"mergeOrdered",{value:function(e,r){return t(this,e,r,!0)},configurable:!0})}(),self.createSearchRegex=function(t,e,r){const n=e?"g":"gi";let i;if(r)try{i=new RegExp(t,n)}catch(t){}return i||(i=self.createPlainTextSearchRegex(t,n)),i},self.createPlainTextSearchRegex=function(t,e){const r=String.regexSpecialCharacters();let n="";for(let e=0;e<t.length;++e){const i=t.charAt(e);-1!==r.indexOf(i)&&(n+="\\"),n+=i}return new RegExp(n,e||"")},self.spacesPadding=function(t){return" ".repeat(t)},self.numberToStringWithSpacesPadding=function(t,e){const r=t.toString(),n=Math.max(0,e-r.length);return self.spacesPadding(n)+r},Set.prototype.firstValue=function(){return this.size?this.values().next().value:null},Map.prototype.inverse=function(){const t=new Platform.Multimap;for(const e of this.keys()){const r=this.get(e);t.set(r,e)}return t};class f{constructor(){this._map=new Map}set(t,e){let r=this._map.get(t);r||(r=new Set,this._map.set(t,r)),r.add(e)}get(t){return this._map.get(t)||new Set}has(t){return this._map.has(t)}hasValue(t,e){const r=this._map.get(t);return!!r&&r.has(e)}get size(){return this._map.size}delete(t,e){const r=this.get(t);if(!r)return!1;const n=r.delete(e);return r.size||this._map.delete(t),n}deleteAll(t){this._map.delete(t)}keysArray(){return[...this._map.keys()]}valuesArray(){const t=[];for(const e of this._map.values())t.push(...e.values());return t}clear(){this._map.clear()}}self.suppressUnused=function(t){},self.setImmediate=function(t){const e=[...arguments].slice(1);return Promise.resolve().then(()=>t(...e)),0},self.runOnWindowLoad=function(t){"complete"===document.readyState||"interactive"===document.readyState?t():self.addEventListener("DOMContentLoaded",(function e(){self.removeEventListener("DOMContentLoaded",e,!1),t()}),!1)};const p=Symbol("singleton");self.singleton=function(t){if(p in t)return t[p];const e=new t;return t[p]=e,e},self.base64ToSize=function(t){if(!t)return 0;let e=3*t.length/4;return"="===t[t.length-1]&&e--,t.length>1&&"="===t[t.length-2]&&e--,e},self.unescapeCssString=function(t){return t.replace(/(?<!\\)\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/gs,(t,e,r)=>{if(r)return r;const n=parseInt(e,16);return 55296<=n&&n<=57343||0===n||n>1114111?"�":String.fromCodePoint(n)})},self.Platform=self.Platform||{},Platform=Platform||{},Platform.Multimap=f;var h=Object.freeze({__proto__:null,removeElement:(t,e,r)=>{let n=t.indexOf(e);if(-1===n)return!1;if(r)return t.splice(n,1),!0;for(let r=n+1,i=t.length;r<i;++r)t[r]!==e&&(t[n++]=t[r]);return t.length=n,!0}});var g=Object.freeze({__proto__:null,isValid:t=>!isNaN(t.getTime()),toISO8601Compact:t=>{function e(t){return(t>9?"":"0")+t}return t.getFullYear()+e(t.getMonth()+1)+e(t.getDate())+"T"+e(t.getHours())+e(t.getMinutes())+e(t.getSeconds())}});function d(t,...e){return s(t,Array.prototype.slice.call(arguments,1))}function y(t){return t}class b{constructor(t){this._localizedFormat=t,this._tokenizedFormat=n(this._localizedFormat,o)}static _append(t,e){return t+e}format(t){return i(this._localizedFormat,arguments,o,"",b._append,this._tokenizedFormat).formattedResult}}const m=new WeakMap;var v=Object.freeze({__proto__:null,UIString:d,serializeUIString:function(t,e=[]){const r={messageParts:[t],values:e};return JSON.stringify(r)},deserializeUIString:function(t){return t?JSON.parse(t):{}},localize:y,UIStringFormat:b,ls:function(t,...e){if("string"==typeof t)return t;let r=m.get(t);return r||(r=t.join("%s"),m.set(t,r)),d(r,...e)}});var x=Object.freeze({__proto__:null,clamp:(t,e,r)=>{let n=t;return t<e?n=e:t>r&&(n=r),n},mod:(t,e)=>(t%e+e)%e,bytesToString:t=>{if(t<1e3)return d("%.0f B",t);const e=t/1e3;if(e<100)return d("%.1f kB",e);if(e<1e3)return d("%.0f kB",e);const r=e/1e3;return d(r<100?"%.1f MB":"%.0f MB",r)}});var S=Object.freeze({__proto__:null,addAll:function(t,e){for(const r of e)t.add(r)}});const{ls:_}=v;export{h as ArrayUtilities,g as DateUtilities,f as Multimap,x as NumberUtilities,S as SetUtilities,c as StringUtilities,v as UIString,_ as ls};
